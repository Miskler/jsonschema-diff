{
  "type": "object",
  "additionalProperties": false,

  "properties": {
    "price": {
      "type": "number",
      "minimum": 0,
      "exclusiveMaximum": 1000
    },

    "temperature": {
      "type": "number",
      "minimum": -50,
      "exclusiveMinimum": true,
      "maximum": 200
    },

    "name": {
      "type": "string",
      "minLength": 3,
      "maxLength": 80
    },

    "tags": {
      "type": "array",
      "items": { "type": "string", "minLength": 1, "maxLength": 20 },
      "minItems": 1,
      "maxItems": 10,
      "uniqueItems": true
    },

    "ratings": {
      "type": "array",
      "items": {
        "type": "number",
        "minimum": 0,
        "maximum": 5
      },
      "minItems": 0,
      "maxItems": 100
    },

    "settings": {
      "type": "object",
      "minProperties": 2,
      "maxProperties": 8,
      "properties": {
        "retries": { "type": "integer", "minimum": 0, "maximum": 10 },
        "timeoutSec": { "type": "number", "minimum": 0, "maximum": 30 }
      },
      "additionalProperties": true
    },

    "items": {
      "type": "array",
      "minItems": 1,
      "maxItems": 50,
      "items": { "$ref": "#/$defs/item" }
    },

    "badRange": {
      "type": "number",
      "minimum": 5,
      "exclusiveMinimum": 6,
      "maximum": 10
    }
  },

  "required": ["price", "name"],

  "$defs": {
    "url": { "type": "string", "format": "uri" },

    "item": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "id": { "type": "integer", "minimum": 1 },
        "title": { "type": "string", "minLength": 1 },
        "sort": { "type": "integer" },
        "pageUrls": {
          "type": "array",
          "items": { "$ref": "#/$defs/url" },
          "uniqueItems": true,
          "minItems": 0,
          "maxItems": 50
        },
        "blocks": {
          "type": "array",
          "minItems": 0,
          "maxItems": 20,
          "items": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
              "id": { "type": "integer", "minimum": 1 },
              "type": { "type": "string", "minLength": 1, "maxLength": 40 },
              "sort": { "type": "integer", "minimum": 0, "maximum": 9999 },
              "payload": {
                "type": "object",
                "minProperties": 0,
                "maxProperties": 50
              }
            },
            "required": ["id", "type", "payload"]
          }
        }
      },
      "required": ["id", "title", "blocks"]
    }
  }
}
